<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DANÇA é isso aqui, ó</title>

<style>
* { box-sizing: border-box; }

html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: black;
    font-family: sans-serif;
}

#mediaContainer {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none;
}

#fetchBtn {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10;
    padding: 12px 24px;
    font-size: 16px;
    cursor: pointer;
}
</style>
</head>
<body>

<div id="mediaContainer">

    <video 
        id="bgVideo"
        muted
        playsinline
        preload="auto"
        src="https://redesencontros.github.io/dancaeissoaquio/content/video1.mp4">
    </video>

    <audio
        id="bgAudio"
        preload="auto"
        src="https://redesencontros.github.io/dancaeissoaquio/content/audio1.mp3">
    </audio>

</div>

<button id="fetchBtn">FETCH</button>

<script>
const video = document.getElementById("bgVideo");
const audio = document.getElementById("bgAudio");
const fetchBtn = document.getElementById("fetchBtn");

/* ===== HARD LOCK SETTINGS ===== */

// No controls ever
video.controls = false;

// Force loop via property (more reliable than attribute)
video.loop = true;
audio.loop = true;

// Attempt autoplay safely
async function startMedia() {
    try {
        await video.play();
    } catch (e) {
        video.muted = true;
        await video.play();
    }

    try {
        await audio.play();
    } catch (e) {
        // Audio autoplay likely blocked until interaction
        console.log("Audio autoplay blocked until user interaction.");
    }
}

window.addEventListener("load", startMedia);

/* Stop everything when FETCH pressed */
fetchBtn.addEventListener("click", () => {
    video.pause();
    audio.pause();
});
</script>

</body>
</html>
